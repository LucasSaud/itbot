
/** 
* This file has been protected.
*/
   
const _0x40920c=_0x2cf5;(function(_0x18f748,_0x3f086a){const _0x4d0cd=_0x2cf5,_0x5eac49=_0x18f748();while(!![]){try{const _0x4ff66d=parseInt(_0x4d0cd(0x12f))/0x1*(parseInt(_0x4d0cd(0x142))/0x2)+parseInt(_0x4d0cd(0x143))/0x3+parseInt(_0x4d0cd(0x137))/0x4*(-parseInt(_0x4d0cd(0x148))/0x5)+parseInt(_0x4d0cd(0x14b))/0x6+-parseInt(_0x4d0cd(0x140))/0x7*(-parseInt(_0x4d0cd(0x12b))/0x8)+parseInt(_0x4d0cd(0x12c))/0x9*(-parseInt(_0x4d0cd(0x134))/0xa)+-parseInt(_0x4d0cd(0x13d))/0xb*(parseInt(_0x4d0cd(0x141))/0xc);if(_0x4ff66d===_0x3f086a)break;else _0x5eac49['push'](_0x5eac49['shift']());}catch(_0x22beb4){_0x5eac49['push'](_0x5eac49['shift']());}}}(_0x2fea,0x9b511));function _0x2cf5(_0x20df66,_0x1d09d7){const _0x2fea86=_0x2fea();return _0x2cf5=function(_0x2cf56a,_0x5ae19b){_0x2cf56a=_0x2cf56a-0x12b;let _0xa66b14=_0x2fea86[_0x2cf56a];return _0xa66b14;},_0x2cf5(_0x20df66,_0x1d09d7);}const fs=require('fs'),util=require('util'),path=require('path'),{Sequelize,DataTypes,Op}=require('sequelize'),moment=require('moment-timezone'),config=require(_0x40920c(0x144)),Utils=require('./utils'),Chart=require('./chart'),PDFDocument=require(_0x40920c(0x13b)),QuickChart=require(_0x40920c(0x136)),Database=require('./db'),DB=new Database(),Graphs=new Chart();function _0x2fea(){const _0x3ac922=['pipe','6794526lnTnzu','points','image','dGraph','Pontuação\x20dos\x205\x20Melhores\x20Leads','8RLwqDx','9yapOHa','Relatório\x20de\x20Pontuação\x20de\x20Leads\x20(Top\x205\x20no\x20Gráfico)','dir','1XfBVPw','createWriteStream','fontSize','error','Relatório\x20de\x20pontuação\x20dos\x2030\x20melhores\x20leads\x20gerado\x20com\x20sucesso.','3479510WmDYOt','center','quickchart-js','5948miscgT','Erro\x20ao\x20gerar\x20o\x20relatório:','join','reports','pdfkit','findAll','12815VlNjGl','map','Contacts','1684333oOTtnm','20472ymvppv','2184382hDPMuA','2219538acBzUK','../conf/config','text','moveDown','whatsappNumber','785CoCdLX','end'];_0x2fea=function(){return _0x3ac922;};return _0x2fea();}async function generateLeadScoreReport(){const _0x3b4b82=_0x40920c,_0x2a15c1=new PDFDocument(),_0x5ba801=path[_0x3b4b82(0x139)](__dirname,'..',config[_0x3b4b82(0x12e)][_0x3b4b82(0x13a)],'AA-LEAD-REPORT.pdf');_0x2a15c1[_0x3b4b82(0x14a)](fs[_0x3b4b82(0x130)](_0x5ba801)),_0x2a15c1[_0x3b4b82(0x131)](0x12)[_0x3b4b82(0x145)](_0x3b4b82(0x12d),{'align':_0x3b4b82(0x135)}),_0x2a15c1['moveDown']();try{const _0x13621a=await DB[_0x3b4b82(0x13f)][_0x3b4b82(0x13c)]({'attributes':[_0x3b4b82(0x147),_0x3b4b82(0x14c)],'order':[[_0x3b4b82(0x14c),'DESC']],'limit':0x1e}),_0x264c7b=_0x13621a['slice'](0x0,0x5)[_0x3b4b82(0x13e)](_0x2ab77f=>({'name':_0x2ab77f[_0x3b4b82(0x147)],'count':_0x2ab77f[_0x3b4b82(0x14c)]})),_0x3a526e=await Graphs[_0x3b4b82(0x14e)](null,null,_0x264c7b,_0x3b4b82(0x14f),!![]);_0x2a15c1[_0x3b4b82(0x14d)](_0x3a526e,0x64,_0x2a15c1['y'],{'width':0x190}),_0x2a15c1[_0x3b4b82(0x146)](),_0x2a15c1[_0x3b4b82(0x131)](0xe)[_0x3b4b82(0x145)]('Pontuações\x20dos\x2030\x20Melhores\x20Leads\x20(Top\x205\x20no\x20Gráfico):',{'underline':!![]}),_0x13621a['forEach'](_0x2a4f29=>{const _0x5b55be=_0x3b4b82;_0x2a15c1[_0x5b55be(0x131)](0xc)[_0x5b55be(0x145)](_0x2a4f29['whatsappNumber']+':\x20'+_0x2a4f29[_0x5b55be(0x14c)]);}),_0x2a15c1[_0x3b4b82(0x149)](),console['log'](_0x3b4b82(0x133));}catch(_0x514301){console[_0x3b4b82(0x132)](_0x3b4b82(0x138),_0x514301);}}generateLeadScoreReport();
   